<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualization Dashboard</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
        #loader {
            border: 16px solid #f3f3f3;
            border-radius: 50%;
            border-top: 16px solid #3498db;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
            margin: auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #error {
            color: red;
            text-align: center;
            display: none;
        }

        .chart {
            width: 900px;
            height: 500px;
            margin: 20px auto;
        }
    </style>
    <script type="text/javascript">
        google.charts.load('current', {
            packages: ['corechart', 'geochart', 'table', 'gauge', 'timeline', 'treemap']
        });

        google.charts.setOnLoadCallback(drawCharts);

        function drawCharts() {
            document.getElementById('loader').style.display = 'block';
            fetch('DataListCreate')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('loader').style.display = 'none';
                    console.log(data);
                    if (data && Array.isArray(data)) {
                        data.forEach((item, index) => {
                            const chartConfig = {
                                type: 'ColumnChart', // Update this based on your requirements
                                data: [
                                    ['Attribute', 'Value'],
                                    ['Intensity', item.intensity],
                                    ['Likelihood', item.likelihood],
                                    ['Relevance', item.relevance],
                                    // Add more attributes if necessary
                                ],
                                elementId: `chart_div_${index}`,
                                options: {
                                    title: `Chart for ID: ${item.id}`,
                                    width: 900,
                                    height: 500,
                                    legend: { position: 'none' }
                                }
                            };
                            createChartContainer(chartConfig.elementId);
                            drawChart(chartConfig);
                        });
                    } else {
                        document.getElementById('error').style.display = 'block';
                        console.error('Invalid data format:', data);
                    }
                })
                .catch(error => {
                    document.getElementById('loader').style.display = 'none';
                    document.getElementById('error').style.display = 'block';
                    console.error('Error fetching data:', error);
                });
        }

        function createChartContainer(elementId) {
            const container = document.createElement('div');
            container.id = elementId;
            container.className = 'chart';
            document.body.appendChild(container);
        }

        function drawChart(chartConfig) {
            const chartData = google.visualization.arrayToDataTable(chartConfig.data);
            let chart;
            switch (chartConfig.type) {
                case 'GeoChart':
                    chart = new google.visualization.GeoChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'ColumnChart':
                    chart = new google.visualization.ColumnChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'ScatterChart':
                    chart = new google.visualization.ScatterChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'PieChart':
                    chart = new google.visualization.PieChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'BubbleChart':
                    chart = new google.visualization.BubbleChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'DonutChart':
                    chart = new google.visualization.PieChart(document.getElementById(chartConfig.elementId));
                    chartConfig.options.pieHole = 0.4; // Make it a donut chart
                    break;
                case 'Histogram':
                    chart = new google.visualization.Histogram(document.getElementById(chartConfig.elementId));
                    break;
                case 'BarChart':
                    chart = new google.visualization.BarChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'ComboChart':
                    chart = new google.visualization.ComboChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'OrgChart':
                    chart = new google.visualization.OrgChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'Table':
                    chart = new google.visualization.Table(document.getElementById(chartConfig.elementId));
                    break;
                case 'AreaChart':
                    chart = new google.visualization.AreaChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'SteppedAreaChart':
                    chart = new google.visualization.SteppedAreaChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'LineChart':
                    chart = new google.visualization.LineChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'Timeline':
                    chart = new google.visualization.Timeline(document.getElementById(chartConfig.elementId));
                    break;
                case 'Gauge':
                    chart = new google.visualization.Gauge(document.getElementById(chartConfig.elementId));
                    break;
                case 'CandlestickChart':
                    chart = new google.visualization.CandlestickChart(document.getElementById(chartConfig.elementId));
                    break;
                case 'Treemap':
                    chart = new google.visualization.TreeMap(document.getElementById(chartConfig.elementId));
                    break;
                default:
                    console.error('Unknown chart type:', chartConfig.type);
                    return;
            }
            chart.draw(chartData, chartConfig.options);
        }
    </script>
</head>
<body>
    <h1>Data Visualization Dashboard</h1>
    <div id="loader"></div>
    <div id="error">Error fetching data. Please try again later.</div>
</body>
</html> 


